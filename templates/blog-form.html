{% extends "base.html" %}
{% load static %}
{%  block start %}

<style>
      a {
    color: #00cc99;
    
}

.btn.btn-primary {
    color: #ffffff;
    background-color: #00cc99;
    border-color: #00cc99;
}

.btn.btn-primary:hover, .btn.btn-outline-primary:hover {
    color: #ffffff;
    background-color: #00a37b;
    border-color: #00a37b;
}

</style>

			<!-- CONTENT WRAPPER -->
			<div class="ec-content-wrapper">
				<div class="content">
					<div class="breadcrumb-wrapper d-flex align-items-center justify-content-between">
						<div>
							<h1>{% if is_edit %}Edit blog{% else %}Add blog{% endif %}</h1>
							<p class="breadcrumbs"><span><a href="{% url 'dashboard_view' %}">Dashboard</a></span>
								<span><i class="mdi mdi-chevron-right"></i></span>{% if is_edit %}Edit blog{% else %}Add blog{% endif %}</p>
						</div>
						<div> 
							<a href="{% url 'blog_list' %}" class="btn btn-primary"> View All
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<div class="card card-default">
								<div class="card-header card-header-border-bottom">
									<h2>{% if is_edit %}Edit blog{% else %}Add blog{% endif %}</h2>
								</div>

								<div class="card-body">
									<div class="row ec-vendor-uploads">  
										<form id="add-office-form" class=" row g-3" action="{% if is_edit %}{% url 'edit_blog' data.id %}{% else %}{% url 'add_blog' %}{% endif %}" method="post" enctype="multipart/form-data">
										    
											{% csrf_token %}
											<!--<div class="col-lg-12">-->
											<!--    <div class="ec-vendor-upload-detail">-->
											    
											<!--		<div class="row g-3">-->



											<!--</div>-->
											<!--</div></div>-->
										<div class="col-lg-12">
                                            <div class="ec-vendor-upload-detail">
                                                <div class="row g-3" >
                                                    <div class="col-md-12">
                                                        <label for="serial" class="form-label">Main Heading</label>
                                                        <div class="input-group">
                                                            <span class="input-group-text"><i class="fas fa-align-left"></i></span>
                                                            <input type="text" class="form-control slug-title" name="heading" value="{{data.heading}}"
                                                                id="heading" placeholder="Enter Heading">
                                                        </div>
                                                    </div>
                                        
                                                    <div class="col-md-12">
                                                        <label for="title" class="form-label">Main Title</label>
                                                         <div class="input-group">
                                                            <span class="input-group-text"><i class="fas fa-id-badge"></i></span>
                                                        <input type="text" class="form-control slug-title" name="title" value="{{data.title}}"
                                                            id="title" placeholder="Enter Title">
                                                            </div >
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                                        <div class="col-md-12" style="margin-top:10px">
                                                            <label for="image_url" class="form-label">Main Image URL</label>
                                                            <div class="input-group">
                                                           <span class="input-group-text"><i class="fa-solid fa-link"></i></span>
                                                            <input type="text" class="form-control slug-title" name="image_url" value="{{data.image_url}}"
                                                                id="image_url" placeholder="Enter Image URL">
                                                        </div>
                                                        </div>

											<div class="col-lg-12">
												<div class="ec-vendor-upload-detail">

													<div class="row g-3" >

                                                        <div class="col-md-12">
                                                            <label for="description" class="form-label">Main Description</label>
                                                                <textarea class="form-control slug-title" id="description" name="description" placeholder="Enter Description">{{data.description}}</textarea>
                                                        </div>
                                                    </div>
                                                    	<div class="row g-3" style="margin-top:20px">
                                                        <div class="col-md-12">
                                                            <label for="title2" class="form-label">Second Title (Optional)</label>
                                                               <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-user-circle"></i></span>
                                                            <input type="text" class="form-control slug-title" name="title2" value="{{data.title2}}"
                                                                id="title2" placeholder="Enter Second Title">
                                                        </div>
                                                        </div>
                                                       <div class="col-md-12" style="margin-top:10px">
                                                            <label for="image_url_2" class="form-label">Second Image URL (Optional)</label>
                                                            <div class="input-group">
                                                           <span class="input-group-text"><i class="fa-solid fa-link"></i></span>
                                                            <input type="text" class="form-control slug-title" name="image_url_2" value="{{data.image_url_2}}"
                                                                id="image_url_2" placeholder="Enter Image URL">
                                                        </div>
                                                        </div>

                                                        <div class="col-md-12" >
                                                            <label for="description2" class="form-label">Second Description (Optional)</label>
                                                                <textarea class="form-control slug-title" id="description2" name="description2" placeholder="Enter Second Description">{{data.description2}}</textarea>
                                                        </div>
                                                        </div>
                                                        	<div class="row g-3" >
                                                        <div class="col-md-12" style="margin-top:20px">
                                                            <label for="title3" class="form-label">Third Title (Optional)</label>
                                                                     <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-address-card"></i></span>
                                                            <input type="text" class="form-control slug-title" name="title3" value="{{data.title3}}"
                                                                id="title3" placeholder="Enter Third Title">
                                                        </div>
                                                        </div>
                                                        <div class="col-md-12" style="margin-top:10px">
                                                            <label for="image_url_3" class="form-label">Third Image URL (Optional)</label>
                                                            <div class="input-group">
                                                           <span class="input-group-text"><i class="fa-solid fa-link"></i></span>
                                                            <input type="text" class="form-control slug-title" name="image_url_3" value="{{data.image_url_3}}"
                                                                id="image_url_3" placeholder="Enter Image URL">
                                                        </div>
                                                        </div>

                                                        <div class="col-md-12" >
                                                            <label for="blog_url" class="form-label">Third Description (Optional)</label>
                                                                <textarea class="form-control slug-title" id="description3" name="description3" placeholder="Enter Third Description">{{data.description3}}</textarea>
                                                        </div>
                                                        
</div>
													</div>
													
												</div>
										
										
											<div class="col-md-12" style="margin-top: 10px !important;">
											<button type="submit" class="btn btn-primary">Submit</button>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div> <!-- End Content -->
			</div> <!-- End Content Wrapper -->


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById("add-office-form");

    form.addEventListener("submit", function(event) {
        event.preventDefault();

        const heading = document.getElementById("heading").value.trim();
        const title = document.getElementById("title").value.trim();
        const image_url = document.getElementById("image_url").value.trim();

        if (!heading) {
            Swal.fire({
                icon: 'error',
                title: 'Main Heading Required',
                text: 'Please enter the Main Heading.'
            });
            return;
        } 
        if (!title) {
            Swal.fire({
                icon: 'error',
                title: 'Office Main Title',
                text: 'Please enter the Main Title.'
            });
            return;
        } 
        if (!image_url) {
            Swal.fire({
                icon: 'error',
                title: 'Office Main Image',
                text: 'Please enter the Main Image.'
            });
            return;
        } 

        const rawDescription = CKEDITOR.instances.description.getData();
        const cleanedDescription = rawDescription.replace(/<[^>]*>/g, '').replace(/&nbsp;/g, '').trim();
        
        if (!cleanedDescription) {
            Swal.fire({
                icon: 'error',
                title: 'Description Required',
                text: 'Please fill in Description.'
            });
            return;
        }

        // âœ… All good â€” ask for confirmation
        Swal.fire({
            title: 'Are you sure?',
            text: "You want to submit this Blog?",
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, Submit it!'
        }).then((result) => {
            if (result.isConfirmed) {
                form.submit();
            }
        });
    });
});
</script>


{%  endblock %}